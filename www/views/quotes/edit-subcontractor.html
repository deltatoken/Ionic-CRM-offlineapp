<ion-view cache-view="false">
    <ion-nav-title>
        Edit subcontractors for {{ asset.name }}
    </ion-nav-title>
    <ion-content>
        <form class="padding" novalidate name="forms.subcontractorForm">
            <label class="item item-input item-select" ng-class="{ 'has-errors' : forms.subcontractorForm.$submitted && forms.subcontractorForm.tradeTypeId.$invalid}">
                <div class="input-label">
                    Trade*
                </div>
                <select name="tradeTypeId" ng-model="subcontractor.tradeTypeId" required>
                    <option ng-repeat="subcontractorType in subcontractorTypes track by subcontractorType.id" value="{{ subcontractorType.id }}" ng-selected="subcontractorType.id == subcontractor.tradeTypeId">{{ subcontractorType.type_value }}</option>
                </select>
            </label>

            <div ng-show="forms.subcontractorForm.$submitted && forms.subcontractorForm.tradeTypeId.$invalid" ng-messages="forms.subcontractorForm.tradeTypeId.$error" class="error-container">
                <div ng-messages-include="views/validation-errors.html"></div>
            </div>

            <div class="item">
                Photo<br><br>
                <add-image image-options="{objectUuid: quoteUuid, preview: true, objectType: 'subcontractor', class: 'button-small button-block button-positive'}"></add-image>
            </div>

            <label class="item item-input" ng-class="{ 'has-errors' : forms.subcontractorForm.$submitted && forms.subcontractorForm.desc.$invalid}">
                <div class="input-label">
                    Description*
                </div>
                <input ng-model="subcontractor.desc" name="desc" type="text" required>
            </label>

            <div ng-show="forms.subcontractorForm.$submitted && forms.subcontractorForm.desc.$invalid" ng-messages="forms.subcontractorForm.desc.$error" class="error-container">
                <div ng-messages-include="views/validation-errors.html"></div>
            </div>

            <label class="item item-input" ng-class="{ 'has-errors' : forms.subcontractorForm.$submitted && forms.subcontractorForm.name.$invalid}">
                <div class="input-label">
                    Name*
                </div>
                <input ng-model="subcontractor.subcontractorName" name="name" type="text" required>
            </label>

            <div ng-show="forms.subcontractorForm.$submitted && forms.subcontractorForm.name.$invalid" ng-messages="forms.subcontractorForm.name.$error" class="error-container">
                <div ng-messages-include="views/validation-errors.html"></div>
            </div>

            <label class="item item-input" ng-class="{ 'has-errors' : forms.subcontractorForm.$submitted && forms.subcontractorForm.phone.$invalid}">
                <div class="input-label">
                    Phone*
                </div>
                <input ng-model="subcontractor.subcontractorPhone" name="phone" type="text" required>
            </label>

            <div ng-show="forms.subcontractorForm.$submitted && forms.subcontractorForm.phone.$invalid" ng-messages="forms.subcontractorForm.phone.$error" class="error-container">
                <div ng-messages-include="views/validation-errors.html"></div>
            </div>
        </form>
    </ion-content>
    <div class="bar bar-footer bar-dark">
        <button class="button button-energized" ui-sref="subcontractor({quoteUuid: quoteUuid})">Cancel</button>
        <button class="button button-positive pull-right" ng-click="submit()">Save</button>
    </div>
</ion-view>
